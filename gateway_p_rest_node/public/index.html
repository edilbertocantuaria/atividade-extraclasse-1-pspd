<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>PSPD REST Gateway</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 2rem; }
      h1 { margin-bottom: 0.5rem; }
      .card { border: 1px solid #333; padding: 1rem; border-radius: 12px; margin-bottom: 1rem; }
      input, button { font-size: 1rem; padding: .5rem; }
      pre { background: #111; color: #eee; padding: 1rem; border-radius: 10px; overflow:auto; }
    </style>
  </head>
  <body>
    <h1>PSPD · HTTP → REST</h1>
    <div class="card">
      <h2>Service A-REST</h2>
      <input id="name" placeholder="Seu nome" />
      <button onclick="hello()">Chamar /a/hello</button>
      <pre id="outA"></pre>
    </div>
    <div class="card">
      <h2>Service B-REST</h2>
      <input id="count" type="number" value="5" />
      <input id="delay" type="number" value="0" />
      <button onclick="nums()">Chamar /b/numbers</button>
      <pre id="outB"></pre>
    </div>
    <script>
      async function hello() {
        const name = document.getElementById('name').value || 'mundo';
        const r = await fetch(`/a/hello?name=${encodeURIComponent(name)}`);
        const j = await r.json();
        document.getElementById('outA').textContent = JSON.stringify(j, null, 2);
      }
      async function nums() {
        const count = document.getElementById('count').value || 5;
        const delay_ms = document.getElementById('delay').value || 0;
        const r = await fetch(`/b/numbers?count=${count}&delay_ms=${delay_ms}`);
        const j = await r.json();
        document.getElementById('outB').textContent = JSON.stringify(j, null, 2);
      }
    </script>
  </body>
</html>
